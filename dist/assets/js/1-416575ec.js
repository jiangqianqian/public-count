webpackJsonp([1],{10:function(t,e,i){var a=i(1);i(2);t.exports={tpl:function(t){var e='<div class="page page-current"> <header class="bar bar-nav"> <div class="buttons-tab"> <a href="#tab1" class="tab-link';return 1==t.tabIndex&&(e+=" active"),e+=' button">待拍摄</a> <a href="#tab2" class="tab-link',2==t.tabIndex&&(e+=" active"),e+=' button">已拍摄</a> <a href="#tab3" class="tab-link',3==t.tabIndex&&(e+=" active"),e+=' button">已取消</a> </div> </header> <nav id="nav" class="bar bar-tab"></nav> <div class="status"> <div class="buttons-row"> <a href="javascript:;" class="active button" data-status="WAITING_UPLOAD">待上传</a> <a href="javascript:;" class="button" data-status="WAITING_AUDIT">待审核</a> <a href="javascript:;" class="button" data-status="AUDIT_NOT_PASS">不通过</a> <a href="javascript:;" class="button" data-status="FINISHED">已完成</a> </div> </div> <div class="content infinite-scroll infinite-scroll-bottom" data-distance="50"> <div class="tabs"> <div id="tab1" class="tab',1==t.tabIndex&&(e+=" active"),e+='"></div> <div id="tab2" class="tab',2==t.tabIndex&&(e+=" active"),e+='"></div> <div id="tab3" class="tab',3==t.tabIndex&&(e+=" active"),e+='"></div> </div> <div class="infinite-scroll-preloader scroll-loading"> <div class="preloader"></div> </div> <div class="infinite-scroll-preloader nomore-data"> 没有更多数据了 </div> <div class="infinite-scroll-preloader no-data"> <img class="img" src="assets/img/nodata.png"> <div>暂无订单</div> </div> </div> <div id="popup"></div></div><style scoped> .bar { padding: 0; } .bar .button { line-height: 2.2rem; height: 2.2rem; top: 0; } .content {  } .status { padding: 0.8rem 0.5rem; background: #efeff4; position: fixed; top: 2.2rem; left: 0; width: 100%; z-index: 16; display: none; } .status .button.active{ background-color: #25ae5f; color: #ffffff; } .status .button { border-color: #25ae5f; color: #25ae5f; line-height: 1.8rem; height: 1.8rem; font-size: 0.7rem; font-weight: 400;} .list-block { margin: 0 } .item-inner { align-self: flex-start; } .list-block .item-content { padding-left: 0.5rem; } #tab1 .list-block .item-content:after, #tab2 .list-block .item-content:after{ content: \'\'; position: absolute; left: 0.5rem; bottom: 0; right: auto; top: auto; height: 1px; width: calc(100% - 0.5rem); background-color: #e7e7e7; display: block; z-index: 8; -webkit-transform-origin: 50% 100%; transform-origin: 50% 100%; } .list-block.media-list .item-inner { padding-top: 0; padding-bottom: 0.7rem; } .list-block .item-inner:after { background-color: #ffffff; z-index: 8; } .item-title { color: #2e2e2e; font-size: 0.75rem; line-height: 1rem; font-weight: 400; padding-left: 0.5rem; padding-top: 0.8rem; } .item-subtitle { color: #a6a6a6; font-size: 0.6rem; font-weight: 400; line-height: 0.85rem; padding-top: 0.3rem; } .item-right { margin-right: 0.5rem; align-self: flex-start; padding-bottom: 0.45rem; } .item-ops { text-align: right; width: 8rem; padding-top: 0.5rem; } .item-date { color: #ff9911; font-size: 0.7rem; font-weight: 700; display: inline-block; line-height: 0.7rem; vertical-align: middle; padding-right: 0.5rem; } .item-date > span { font-size: 0.55rem; color: #2e2e2e; font-weight: 400; } .item-date > span > span { color: #a6a6a6; font-weight: 400; } .item-finishdate { font-size: 0.7rem; color: #2e2e2e; line-height: 0.8rem; } .item-finishdate span { font-size: 0.6rem; font-weight: 400; color: #a6a6a6; } .item-finish { color: #25ae5f; font-size: 0.7rem; font-weight: 400; padding: 0.2rem 0.75rem; border-radius: 0.65rem; border: 1px solid #25ae5f; } .item-canceldate { color: #a6a6a6; font-size: 0.8rem; font-weight: 400; line-height: 0.8rem; } .item-canceldate span { font-size: 0.55rem; font-weight: 400; } .list-cancel-block { background: #ffffff; margin-top: 0.5rem; } .list-cancel-block .item-content { border-bottom: 1px solid #e7e7e7; } .list-cancel-block .item-desc { color: #2e2e2e; font-size: 0.6rem; font-weight: 400; padding: 0.5rem 0.5rem 0.5rem 0.5rem; } #tab2 { overflow: hidden; } #tab2 .list-block { margin-top: 3.4rem; overflow: auto; } #tab3 .list-block .item-content { padding-left: 0; margin-left: 0.5rem; } .nomore-data, .no-data { display: none; color: #a6a6a6; font-size: 0.75rem; } .no-data { margin-top: 4rem; } .no-data img { height: 8rem; } .list-block ul:after { z-index: 8; } .item-title .ellipsis { display: inline-block; text-overflow: ellipsis; overflow: hidden; vertical-align: middle; } .item-title .garden { max-width: 4.7rem; } .item-title .build { max-width: 3.75rem; }</style>'},data:{},refs:{nav:{el:"#nav",component:i(15)},confirmPopup:{component:i(16),el:"#popup",data:{title:"是否确认已完成拍摄任务？",zindex:9,height:7}}},listen:{mount:function(){var t=this;switch(a.setTitle("历史实勘"),this.$(".infinite-scroll-bottom").on("infinite",function(){t.refs["tab"+t.data.tabIndex].trigger("loadmore")}),this.data.tabIndex){case"1":this.refs.tab1=a.mount(i(27),this.es+" #tab1"),this.refs.tab1.parent=this;break;case"2":this.refs.tab2=a.mount(i(26),this.es+" #tab2"),this.refs.tab2.parent=this;break;case"3":this.refs.tab3=a.mount(i(20),this.es+" #tab3"),this.refs.tab3.parent=this}}},events:{"click .tab-link":"hashTab","click .status .button":"switchStatus"},handle:{hashTab:function(t){var e=$(t.target).attr("href").replace("#","");a.cr.go("/order/"+e)},switchStatus:function(t){this.$(".status .button.active").removeClass("active"),$(t.target).addClass("active"),this.refs.tab2.trigger("switchStatus",$(t.target).data("status"))}}}},15:function(t,e,i){var a=i(1);t.exports={tpl:function(t){return'<a class="tab-item external'+(0==t.index?" active":"")+'" href="javascript:;" data-index="0" data-href=""> <span class="icon icon-pai"></span> <span class="tab-label">派单</span></a><a class="tab-item external'+(1==t.index?" active":"")+'" href="javascript:;" data-index="1" data-href="/order"> <span class="icon icon-order"></span> <span class="tab-label">订单</span></a><a class="tab-item external'+(2==t.index?" active":"")+'" href="javascript:;" data-index="2" data-href="/profile"> <span class="icon icon-user"></span> <span class="tab-label">我的</span></a>'},listen:{update:function(){this.data.index=a.navIndex||0}},events:{"click .tab-item":"switchTab"},handle:{switchTab:function(t){var e=$(t.currentTarget);a.navIndex=e.data("index"),a.cr.go(e.data("href"))}}}},16:function(t,e){t.exports={tpl:function(t){var e="undefined"!=typeof _encodeHTML?_encodeHTML:function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}}();return'<div class="popup popup-confirm confirm2" style="height: '+t.height+"rem; z-index: "+t.zindex+';"> <div class="content"> <div class="content-title">'+e(t.title)+'</div> <div class="row"> <div class="col-50"><a href="javascript:;" class="close-popup button button-confirm">确 认</a></div> <div class="col-50"><a href="javascript:;" class="close-popup button button-cancel">取 消</a></div> </div> </div></div><style scoped> .popup-confirm { top: initial; bottom: 0; } .popup-confirm .content { text-align: center; color: #7b7f83; font-size: 0.7rem; font-weight: 400; } .popup-confirm .content-title { padding: 0.55rem; border-top: 1px solid #F0F0F0; } .popup-confirm .row { padding: 0 0.5rem; } .popup-confirm .button { font-size: 0.6rem; line-height: 1.5rem; font-weight: 400; height: 1.5rem; color: #ffffff; } .popup-confirm .button-confirm { border-radius: 6px; background-color: #25ae5f; border-color: #25ae5f; } .popup-confirm .button-cancel { border-radius: 6px; background-color: #ff9911; border-color: #ff9911; }</style>'},data:{title:"确认？",height:7.5,zindex:9},mixins:{show:function(){$.popup(".confirm2")},hide:function(){$.closeModal(".confirm2")}},events:{"click .button-confirm":"confirm","click .button-cancel":"cancel"},handle:{confirm:function(){this.trigger("confirm")},cancel:function(){this.trigger("cancel")}}}},17:function(t,e){t.exports={fetch:function(){var t=this;return $.ajax({data:t.fetchParams,url:t.fetchUrl})},refresh:function(){var t=this;this.loaded=!1,this.fetchParams.page=1,this.parent.$(".no-data").hide(),this.fetch().done(function(e){t.data.items=e.data.data,t.update(),t.parent.$(".content.infinite-scroll").scrollTop(0)})},listen:{update:function(){var t=new Date;this.data.today={year:t.getFullYear(),month:t.getMonth()+1,day:t.getDate()},this.data.resource&&(this.data.items=this.data.resource.data.data,this.data.pageCount=this.data.resource.data.pageCount,delete this.data.resource)},updated:function(){this.data.items&&this.data.items.length?(this.parent.$(".no-data").hide(),this.fetchParams.page<this.data.pageCount?(this.parent.$(".scroll-loading").show(),this.parent.$(".nomore-data").hide()):(this.parent.$(".scroll-loading").hide(),this.loaded&&this.parent.$(".nomore-data").show())):(this.parent.$(".scroll-loading").hide(),this.parent.$(".no-data").show())},loadmore:function(){var t=this,e=this.parent.$(".infinite-scroll-bottom");if(this.fetchParams.page>=this.data.pageCount)return this.parent.$(".scroll-loading").hide(),void(this.loaded&&this.parent.$(".nomore-data").show());$.detachInfiniteScroll(e),this.loaded=!0,this.fetchParams.page++,this.fetch().done(function(i){t.data.items=t.data.items.concat(i.data.data),t.update(),$.attachInfiniteScroll(e)})}}}},20:function(t,e,i){var a=i(1),n=i(2),s=i(17);t.exports={tpl:function(t){var e="undefined"!=typeof _encodeHTML?_encodeHTML:function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}}(),i="",a=t.items;if(a)for(var n,s=-1,o=a.length-1;s<o;)n=a[s+=1],i+='<div class="list-block media-list list-cancel-block item" data-id="'+e(n.id)+'"> <div class="item-title"><span class="garden ellipsis">'+e(n.gardenName)+'</span> <span class="build ellipsis">'+e(n.buildName)+'</span> <span class="ellipsis">'+e(n.unitName)+'</span> <span class="ellipsis">'+e(n.roomNumber)+'</span></div> <div class="item-content"> <div class="item-inner"> <div class="item-subtitle">'+e(n.appointmentName)+" "+e(n.appointmentPhone)+"<br>订单编号："+e(n.appointmentNo)+'</div> </div> <div class="item-right"> <div class="item-ops"> <div class="item-canceldate">'+e(n.hour||"00")+":"+e((n.minute+"").length<2?"0"+n.minute:n.minute||"00")+"<br><span>"+e(n.month)+"月"+e(n.day)+'</span></div> </div> </div> </div> <div class="item-desc">取消原因：'+e(n.reason)+"</div></div>";return i},data:function(){return this.fetch()},mixins:[{fetchUrl:n.apiUrl+"getCanceleds",fetchParams:{personId:a.personId,page:1,pageSize:10}},s],events:{"click div.item":"openDetail"},handle:{openDetail:function(t){"A"!=t.target.tagName&&a.cr.go("/detail/"+$(t.currentTarget).data("id"))}}}},26:function(t,e,i){var a=i(1),n=i(2),s=i(17);t.exports={tpl:function(t){var e="undefined"!=typeof _encodeHTML?_encodeHTML:function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}}(),i='<div class="list-block media-list"> ';if(t.items&&t.items.length){i+=" <ul> ";var a=t.items;if(a)for(var n,s=-1,o=a.length-1;s<o;)n=a[s+=1],i+=' <div class="item" data-id="'+e(n.id)+'"> <div class="item-title"><span class="garden ellipsis">'+e(n.gardenName)+'</span> <span class="build ellipsis">'+e(n.buildName)+'</span> <span class="ellipsis">'+e(n.unitName)+'</span> <span class="ellipsis">'+e(n.roomNumber)+'</span></div> <li class="item-content"> <div class="item-inner"> <div class="item-subtitle">'+e(n.appointmentName)+" "+e(n.appointmentPhone)+"<br>订单编号："+e(n.appointmentNo)+'</div> </div> <div class="item-right"> <div class="item-ops"> <div class="item-finishdate">'+e(n.year)+"年"+e(n.month)+"月"+e(n.day)+"日 "+e(n.hour||"00")+":"+e((n.minute+"").length<2?"0"+n.minute:n.minute||"00")+"<br><span>完成拍摄时间</span></div> </div> </div> </li> </div> ";i+=" </ul> "}else i+=' <div class="infinite-scroll-preloader scroll-loading shooted-loading"> <div class="preloader"></div> </div> ';return i+="</div>"},data:function(){return this.fetch()},mixins:[{fetchUrl:n.apiUrl+"getShooteds",fetchParams:{status:"WAITING_UPLOAD",personId:a.personId,page:1,pageSize:10}},s],listen:{switchStatus:function(t){this.$(".shooted-loading").show(),this.fetchParams.status=t,this.refresh()},mount:function(){"2"==this.parent.data.tabIndex?this.parent.$(".status").show():this.parent.$(".status").hide()}},events:{"click div.item":"openDetail"},handle:{openDetail:function(t){"A"!=t.target.tagName&&a.cr.go("/detail/"+$(t.currentTarget).data("id"))}}}},27:function(t,e,i){var a=i(1),n=i(2),s=i(17);t.exports={tpl:function(t){var e="undefined"!=typeof _encodeHTML?_encodeHTML:function(t){var e={"&":"&#38;","<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","/":"&#47;"},i=/&(?!#?\w+;)|<|>|"|'|\//g;return function(t){return t?t.toString().replace(i,function(t){return e[t]||t}):""}}(),i='<div class="list-block media-list"> <ul> ',a=t.items;if(a)for(var n,s=-1,o=a.length-1;s<o;)n=a[s+=1],i+=' <div class="item" data-id="'+e(n.id)+'"> <div class="item-title"><span class="garden ellipsis">'+e(n.gardenName)+'</span> <span class="build ellipsis">'+e(n.buildName)+'</span> <span class="ellipsis">'+e(n.unitName)+'</span> <span class="ellipsis">'+e(n.roomNumber)+'</span></div> <li class="item-content"> <div class="item-inner"> <div class="item-subtitle">'+e(n.appointmentName)+" "+e(n.appointmentPhone)+"<br>订单编号："+e(n.appointmentNo)+'</div> </div> <div class="item-right"> <div class="item-ops"> <div class="item-date">'+e(n.beginHour||"00")+":"+e(n.beginMinute||"00")+"~"+e(n.endHour||"00")+":"+e(n.endMinute||"00")+"<br> <span> "+e(n.dayLabel)+" <span>("+e(n.month)+"月"+e(n.day)+'日)</span> </span> </div> <a class="item-finish" href="javascript:;" data-id="'+e(n.id)+'">完成</a> </div> </div> </li> </div> ';return i+=" </ul></div>"},data:function(){return this.fetch()},mixins:[{fetchUrl:n.apiUrl+"getWaitingShoots",fetchParams:{personId:a.personId,page:1,pageSize:10},popupConfirm:function(){var t=this;$.showIndicator(),$.ajax({data:{personId:a.personId,id:t.currentId},url:n.apiUrl+"finishShoot"}).then(function(e){if($.hideIndicator(),"C0000"!=e.code)return $.toast(e.msg);t.refresh()})}},s],listen:{init:function(){this.fetchParams.page=1},mount:function(){this.parent.refs.confirmPopup.on("confirm",this.popupConfirm.bind(this))}},events:{"click div.item":"openDetail","click .item-finish":"openConfirm"},handle:{openDetail:function(t){"A"!=t.target.tagName&&a.cr.go("/detail/"+$(t.currentTarget).data("id"))},openConfirm:function(t){this.currentId=$(t.currentTarget).data("id"),this.parent.refs.confirmPopup.show()}}}}});